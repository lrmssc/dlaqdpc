////  LevelLose.cpp//  dianliwangguomanyouji////  Created by szsycx on 3/17/15.////#include "LevelLose.h"#include "ui/CocosGUI.h"#include "GameScene.h"#include "LevelScene.h"using namespace cocos2d::ui;bool LevelLose::init(){    if(!Layer::init()){        return false;    }    Size visibleSize = Director::getInstance()->getVisibleSize();    bool isMale = UserDefault::getInstance()->getBoolForKey("male",true);    auto title = Sprite::create("lose/title.png");    title->setPosition(Vec2(visibleSize.width/2.0,visibleSize.height-title->getContentSize().height));    addChild(title);        auto * name = Text::create(UserDefault::getInstance()->getStringForKey("name", "小明"), "fonts/zhongwen.ttf", 70);    name->setPosition(Vec2(visibleSize.width/2.0-visibleSize.width*5.0/100.0,visibleSize.height-name->getContentSize().height*12.0/10.0));    addChild(name);        Sprite * sprite;    if(isMale){        sprite = Sprite::create("lose/userm.png");    }else{        sprite = Sprite::create("lose/userf.png");    }    sprite->setPosition(Vec2(visibleSize.width/2.0,visibleSize.height/2.0));    addChild(sprite);    //    auto restart = Button::create("lose/restart.png");//    restart->setPosition(Vec2(visibleSize.width*3.0/10.0,visibleSize.height*2.0/10.0));//    restart->addTouchEventListener([](Ref* pSender ,Widget::TouchEventType type){//        if(type==Widget::TouchEventType::ENDED){//            Director::getInstance()->replaceScene(GameScene::createScene());//            Director::getInstance()->resume();//        }//    });//    addChild(restart);        auto back = Button::create("lose/back.png");    back->addTouchEventListener([](Ref* pSender ,Widget::TouchEventType type){        if(type==Widget::TouchEventType::ENDED){            bool  isPlayMusic = UserDefault::getInstance()->getBoolForKey("music", true);            if(isPlayMusic){                CocosDenshion::SimpleAudioEngine::getInstance()->stopBackgroundMusic();                CocosDenshion::SimpleAudioEngine::getInstance()->preloadBackgroundMusic("xuqu.mp3");                CocosDenshion::SimpleAudioEngine::getInstance()->playBackgroundMusic("xuqu.mp3", true);            }            Director::getInstance()->replaceScene(LevelScene::createScene());            Director::getInstance()->resume();        }    });    back->setPosition(Vec2(visibleSize.width*7.0/10.0,visibleSize.height*2.0/10.0));    addChild(back);        return true;}