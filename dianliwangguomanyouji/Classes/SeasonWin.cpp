////  SeasonWin.cpp//  dianliwangguomanyouji////  Created by szsycx on 3/17/15.////#include "SeasonWin.h"#include "ui/cocosGUI.h"#include "CastleScene.h"#include "LevelScene.h"using namespace cocos2d::ui;bool SeasonWin::init(){    if(!Layer::init()){        return false;    }    Size visibleSize = Director::getInstance()->getVisibleSize();    int currentSeason = UserDefault::getInstance()->getBoolForKey("current_season",1);    auto title = Sprite::create(StringUtils::format("seasonwin/t%d.png",currentSeason));    title->setPosition(Vec2(visibleSize.width/2.0,visibleSize.height-title->getContentSize().height));    addChild(title);        auto name = Text::create(UserDefault::getInstance()->getStringForKey("name", "小明"), "fonts/zhongwen.ttf", 60);    name->setPosition(Vec2(visibleSize.width/2.0-visibleSize.width*5.0/100.0,visibleSize.height-name->getContentSize().height));    addChild(name);        auto enermy = Sprite::create(StringUtils::format("seasonwin/b%d.png",currentSeason));    enermy->setPosition(Vec2(visibleSize.width*2.5/10.0,visibleSize.height/2.0));    addChild(enermy);        bool isMale = UserDefault::getInstance()->getBoolForKey("male", true);    Sprite * hero;    if(isMale){        hero = Sprite::create("seasonwin/userboyhappy.png");    }else{        hero = Sprite::create("seasonwin/usergirlhappy.png");    }    hero->setPosition(Vec2(visibleSize.width*7.5/10,visibleSize.height/2.0));    addChild(hero);        auto backCastle = Button::create("seasonwin/backcastle.png");    backCastle->setPosition(Vec2(visibleSize.width*2.5/10.0,visibleSize.height*1.0/10.0));    backCastle->addTouchEventListener([](Ref*pSender,Widget::TouchEventType type){        if(type==Widget::TouchEventType::ENDED){            Director::getInstance()->replaceScene(CastleScene::createScene());        }    });    addChild(backCastle);        auto backLevel = Button::create("seasonwin/back.png");    backLevel->setPosition(Vec2(visibleSize.width*7.5/10.0,visibleSize.height*1.0/10.0));    backLevel->addTouchEventListener([](Ref*pSender,Widget::TouchEventType type){        if(type==Widget::TouchEventType::ENDED){            Director::getInstance()->replaceScene(LevelScene::createScene());        }    });    addChild(backLevel);        return true;}